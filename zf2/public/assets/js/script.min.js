$(document).ready(function(){$("body").ttwMusicPlayer(myPlaylist,{currencySymbol:"P",buyText:"BUY",tracksToShow:5,autoPlay:!1,description:'Browse it, Rate it, Play it, Buy it. <i class="unselectable btbtn fa fa-2x fa-volume-up text-grey"></i>',ratingCallback:function(a,b,c){console.log(a,b,c)},jPlayer:{swfPath:"../plugin/jquery-jplayer"}})});var global=!0;function change_song(a){$(".track .title").each(function(){var b=$(this).text();b==a&&(global=!1,$(this).click(),global=!0,current_song=b)})}
var toggle_title=!1;setInterval(function(){(toggle_title=!toggle_title)?$("title").html("BSW Radio"):$("title").html(current_song)},1500);function change_mod(a){$(".mod").html(a)}var Server=null;
$(document).ready(function(){log("Connecting...");Server=new FancyWebSocket(server_name);Server.bind("open",function(){log("Connected.")});Server.bind("close",function(a){log("Disconnected.")});Server.bind("message",function(a){log(a);a=JSON.parse(a);var b=a.message;"undefined"===typeof a.updatedj&&(a.updatedj=!1);"undefined"===typeof a.localip&&(a.localip="wqeqwe");"undefined"===typeof a.update_mod&&(a.update_mod=!1);console.log(b+"from"+a.localip);!1!=a.updatedj&&(dj_ip=a.updatedj);-1!=a.localip.indexOf(dj_ip)&&
(change_song(b),!1!=a.update_mod&&change_mod(a.update_mod));"refresh_this_123"==b&&(location.href=location.href)});Server.connect()});function send(a){log("You:"+a);Server.send("message",JSON.stringify({message:a,localip:localip}))}function log(a){$log=$("#log");$log.append(($log.val()?"\n":"")+a);$log[0].scrollTop=$log[0].scrollHeight-$log[0].clientHeight}Pusher.log=function(a){window.console&&window.console.log&&window.console.log(a)};var pusher=new Pusher(pusher_config.key),channel=pusher.subscribe(pusher_config.channel);
channel.bind("my_event",function(a){var b=a.message;"undefined"===typeof a.updatedj&&(a.updatedj=!1);"undefined"===typeof a.update_mod&&(a.update_mod=!1);"undefined"===typeof a.localip&&(a.localip="wqeqwe");console.log(b+"from"+a.localip);console.log(a);!1!=a.updatedj&&(dj_ip=a.updatedj);-1!=a.localip.indexOf(dj_ip)&&(change_song(b),!1!=a.update_mod&&change_mod(a.update_mod));"refresh_this_123"==b&&(location.href=location.href)});
$(document).ready(function(){$(document).on("click",".btbtn",function(){toggleMute(this)});$(document).on("click","#update_mod",function(){Server.send("message",JSON.stringify({update_mod:$(".message").val(),localip:localip}))})});function getVolume(){var a=0;$("audio,video").each(function(){a=$(this).context.volume});return a}function setVolume(a){$("audio,video").each(function(){$(this).context.volume=a})}
function toggleMute(a){0==getVolume()?($(a).addClass("fa-volume-up"),$(a).removeClass("fa-volume-off"),setVolume(1)):($(a).removeClass("fa-volume-up"),$(a).addClass("fa-volume-off"),setVolume(0))}$(document).on("click",".track",function(){var a=$(this).find(".title").text();global&&send(a)});
